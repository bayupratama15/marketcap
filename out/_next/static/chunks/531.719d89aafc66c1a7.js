"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{41531:function(t,e,r){r.r(e),r.d(e,{MetamaskAdapter:function(){return S}});var n=r(4942),a=r(92003),i=r.n(a),o=(r(88473),r(15048),r(17187));r(4445),r(79826),r(12840),r(30778),r(74286);function s(t,e,r){try{Reflect.apply(t,e,r)}catch(n){setTimeout((()=>{throw n}))}}class c extends o.EventEmitter{emit(t){let e="error"===t;const r=this._events;if(void 0!==r)e=e&&void 0===r.error;else if(!e)return!1;for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];if(e){let t;if(a.length>0&&([t]=a),t instanceof Error)throw t;const e=new Error("Unhandled error.".concat(t?" (".concat(t.message,")"):""));throw e.context=t,e}const o=r[t];if(void 0===o)return!1;if("function"===typeof o)s(o,this,a);else{const t=o.length,e=function(t){const e=t.length,r=new Array(e);for(let n=0;n<e;n+=1)r[n]=t[n];return r}(o);for(let r=0;r<t;r+=1)s(e[r],this,a)}return!0}}Error;Symbol("IGNORE_SUBSTREAM");var h=r(13631),l=r(2043),d=r.n(l);function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const u={EIP155:"eip155",SOLANA:"solana"},E=m(m({},u),{},{MULTICHAIN:"multichain"}),f="776218ac4734478c90191dde8cae483c",N=(t,e)=>{const r=e?"number"===typeof e?e:parseInt(e,16):(t=>{if(t===u.EIP155)return 1;if(t===u.SOLANA)return 1;throw new Error("Chain namespace ".concat(t," is not supported"))})(t);return t===u.EIP155?(t=>{const e=u.EIP155;return 1===t?{chainNamespace:e,chainId:"0x1",rpcTarget:"https://mainnet.infura.io/v3/".concat(f),displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===t?{chainNamespace:e,chainId:"0x3",rpcTarget:"https://ropsten.infura.io/v3/".concat(f),displayName:"ropsten",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===t?{chainNamespace:e,chainId:"0x4",rpcTarget:"https://rinkeby.infura.io/v3/".concat(f),displayName:"rinkeby",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===t?{chainNamespace:e,chainId:"0x5",rpcTarget:"https://goerli.infura.io/v3/".concat(f),displayName:"goerli",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:42===t?{chainNamespace:e,chainId:"0x2a",rpcTarget:"https://kovan.infura.io/v3/".concat(f),displayName:"kovan",blockExplorer:"https://kovan.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===t?{chainNamespace:e,rpcTarget:"https://polygon-rpc.com",blockExplorer:"https://polygonscan.com",chainId:"0x89",displayName:"Polygon Mainnet",ticker:"matic",tickerName:"matic"}:80001===t?{chainNamespace:e,rpcTarget:"https://rpc-mumbai.maticvigil.com",blockExplorer:"https://mumbai-explorer.matic.today",chainId:"0x13881",displayName:"Polygon Mumbai Testnet",ticker:"matic",tickerName:"matic"}:56===t?{chainNamespace:e,rpcTarget:"https://bsc-dataseed.binance.org",blockExplorer:"https://bscscan.com",chainId:"0x38",displayName:"Binance SmartChain Mainnet",ticker:"BNB",tickerName:"BNB"}:97===t?{chainNamespace:e,rpcTarget:"https://data-seed-prebsc-2-s3.binance.org:8545",blockExplorer:"https://testnet.bscscan.com",chainId:"0x61",displayName:"Binance SmartChain Testnet",ticker:"BNB",tickerName:"BNB"}:null})(r):t===u.SOLANA?(t=>{const e=u.SOLANA;return 1===t?{chainNamespace:e,blockExplorer:"https://explorer.solana.com",chainId:"0x1",displayName:"Solana Mainnet",rpcTarget:"https://api.mainnet-beta.solana.com",ticker:"SOL",tickerName:"Solana Token"}:2===t?{rpcTarget:"https://api.testnet.solana.com",blockExplorer:"https://explorer.solana.com?cluster=testnet",chainId:"0x2",chainNamespace:e,displayName:"testnet",ticker:"SOL",tickerName:"solana"}:3===t?{rpcTarget:"https://api.devnet.solana.com",blockExplorer:"https://explorer.solana.com?cluster=devnet",chainId:"0x3",chainNamespace:e,displayName:"devnet",ticker:"SOL",tickerName:"solana"}:null})(r):null};class g extends h.s{constructor(t,e){super(e),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"message",void 0),this.code=t,this.message=e||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class y extends g{constructor(t,e){super(t,e),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new y(t,"".concat(y.messages[t],", ").concat(e))}static notFound(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5001,t)}static notInstalled(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5002,t)}static notReady(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5003,t)}static windowBlocked(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5004,t)}static windowClosed(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5005,t)}static incompatibleChainNameSpace(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5006,t)}static duplicateAdapterError(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5007,t)}static invalidProviderConfigError(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5008,t)}static providerNotReadyError(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5009,t)}static rpcConnectionError(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5010,t)}static invalidParams(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5011,t)}static invalidNetwork(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5013,t)}}(0,n.Z)(y,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class C extends g{constructor(t,e){super(t,e),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new C(t,"".concat(C.messages[t]).concat(e))}static connectionError(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return C.fromCode(5111,t)}static disconnectionError(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return C.fromCode(5112,t)}static notConnectedError(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return C.fromCode(5113,t)}static popupClosed(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return C.fromCode(5114,t)}}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}(0,n.Z)(C,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});const b={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},w=v({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom"},b),k=v({TORUS_EVM:"torus-evm",METAMASK:"metamask"},b),A=v(v({},k),w);function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const D="external",I={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},x=P(P({},I),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"});class R extends c{constructor(){super(...arguments),(0,n.Z)(this,"adapterData",{}),(0,n.Z)(this,"chainConfig",null)}get chainConfigProxy(){return this.chainConfig?P({},this.chainConfig):null}setChainConfig(t){if(this.status===I.READY)return;if(!t.chainNamespace)throw y.notReady("ChainNamespace is required while setting chainConfig");const e=N(t.chainNamespace,t.chainId);this.chainConfig=P(P({},e),t)}setAdapterSettings(t){}checkConnectionRequirements(){if(this.name!==A.WALLET_CONNECT_V1||this.status!==I.CONNECTING){if(this.status===I.CONNECTING)throw y.notReady("Already connecting");if(this.status===I.CONNECTED)throw C.connectionError("Already connected");if(this.status!==I.READY)throw C.connectionError("Wallet adapter is not ready yet")}}checkInitializationRequirements(){if(this.status!==I.NOT_READY){if(this.status===I.CONNECTED)throw y.notReady("Already connected");if(this.status===I.READY)throw y.notReady("Adapter is already initialized")}}updateAdapterData(t){this.adapterData=t,this.emit(x.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:t})}}d().getLogger("web3auth-logger");class S extends R{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,n.Z)(this,"adapterNamespace",E.EIP155),(0,n.Z)(this,"currentChainNamespace",u.EIP155),(0,n.Z)(this,"type",D),(0,n.Z)(this,"name",A.METAMASK),(0,n.Z)(this,"status",I.NOT_READY),(0,n.Z)(this,"rehydrated",!1),(0,n.Z)(this,"metamaskProvider",null),this.chainConfig=t.chainConfig||null}get provider(){return this.status===I.CONNECTED&&this.metamaskProvider?this.metamaskProvider:null}set provider(t){throw new Error("Not implemented")}async init(t){if(super.checkInitializationRequirements(),this.metamaskProvider=await i()({mustBeMetaMask:!0}),!this.metamaskProvider)throw y.notInstalled("Metamask extension is not installed");this.status=I.READY,this.emit(x.READY,A.METAMASK);try{t.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(e){this.emit(x.ERRORED,e)}}setAdapterSettings(t){}async connect(){if(super.checkConnectionRequirements(),this.chainConfig||(this.chainConfig=N(u.EIP155,1)),this.status=I.CONNECTING,this.emit(x.CONNECTING,{adapter:A.METAMASK}),!this.metamaskProvider)throw C.notConnectedError("Not able to connect with metamask");try{await this.metamaskProvider.request({method:"eth_requestAccounts"});const{chainId:t}=this.metamaskProvider;if(t!==this.chainConfig.chainId&&await this.switchChain(this.chainConfig),this.status=I.CONNECTED,!this.provider)throw C.notConnectedError("Failed to connect with provider");return this.provider.once("disconnect",(()=>{this.disconnect()})),this.emit(x.CONNECTED,{adapter:A.METAMASK,reconnected:this.rehydrated}),this.provider}catch(t){throw this.status=I.READY,this.rehydrated=!1,this.emit(x.ERRORED,t),C.connectionError("Failed to login with metamask wallet")}}async disconnect(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(this.status!==I.CONNECTED)throw C.disconnectionError("Not connected with wallet");null===(t=this.provider)||void 0===t||t.removeAllListeners(),e.cleanup?(this.status=I.NOT_READY,this.metamaskProvider=null):this.status=I.READY,this.rehydrated=!1,this.emit(x.DISCONNECTED)}async getUserInfo(){if(this.status!==I.CONNECTED)throw C.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(t){if(!this.metamaskProvider)throw C.notConnectedError("Not connected with wallet");try{await this.metamaskProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:t.chainId}]})}catch(e){if(4902!==e.code)throw e;await this.metamaskProvider.request({method:"wallet_addEthereumChain",params:[{chainId:t.chainId,chainName:t.displayName,rpcUrls:[t.rpcTarget]}]})}}}}}]);